"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[220],{356:(e,a,t)=>{t.d(a,{A:()=>l});var s=t(43),i=t(347),n=t(579);const l=e=>{const[a,t]=(0,s.useState)(),[l,r]=(0,s.useState)(),[d,o]=(0,s.useState)(!1),u=(0,s.useRef)();(0,s.useEffect)((()=>{if(!a)return;const e=new FileReader;e.onload=()=>{r(e.result)},e.readAsDataURL(a)}),[a]);return(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("input",{id:e.id,ref:u,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:a=>{let s,i=d;a.target.files&&1===a.target.files.length?(s=a.target.files[0],t(s),o(!0),i=!0):(o(!1),i=!1),e.onInput(e.id,s,i)}}),(0,n.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,n.jsxs)("div",{className:"image-upload__preview",children:[l&&(0,n.jsx)("img",{src:l,alt:"Preview"}),!l&&(0,n.jsx)("p",{children:"Please pick an image."})]}),(0,n.jsx)(i.A,{type:"button",onClick:()=>{u.current.click()},children:"PICK IMAGE"})]}),!d&&(0,n.jsx)("p",{children:e.errorText})]})}},244:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(43),i=t(962),n=t(579);const l=(e,a)=>{switch(a.type){case"CHANGE":return{...e,value:a.val,isValid:(0,i.tf)(a.val,a.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},r=e=>{const[a,t]=(0,s.useReducer)(l,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:i,onInput:r}=e,{value:d,isValid:o}=a;(0,s.useEffect)((()=>{r(i,d,o)}),[i,d,o,r]);const u=a=>{t({type:"CHANGE",val:a.target.value,validators:e.validators})},p=()=>{t({type:"TOUCH"})},c="input"===e.element?(0,n.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:p,value:a.value}):(0,n.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:p,value:a.value});return(0,n.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouched&&"form-control--invalid"),children:[(0,n.jsx)("label",{htmlFor:e.id,children:e.label}),c,!a.isValid&&a.isTouched&&(0,n.jsx)("p",{children:e.errorText})]})}},789:(e,a,t)=>{t.d(a,{m:()=>n});var s=t(43);const i=(e,a)=>{switch(a.type){case"INPUT_CHANGE":let t=!0;for(const s in e.inputs)e.inputs[s]&&(t=s===a.inputId?t&&a.isValid:t&&e.inputs[s].isValid);return{...e,inputs:{...e.inputs,[a.inputId]:{value:a.value,isValid:a.isValid}},isValid:t};case"SET_DATA":return{inputs:a.inputs,isValid:a.formIsValid};default:return e}},n=(e,a)=>{const[t,n]=(0,s.useReducer)(i,{inputs:e,isValid:a});return[t,(0,s.useCallback)(((e,a,t)=>{n({type:"INPUT_CHANGE",inputId:e,value:a,isValid:t})}),[]),(0,s.useCallback)(((e,a)=>{n({type:"SET_DATA",inputs:e,formIsValid:a})}),[])]}},962:(e,a,t)=>{t.d(a,{B_:()=>r,Ik:()=>d,i$:()=>o,tf:()=>u});const s="REQUIRE",i="MINLENGTH",n="MAXLENGTH",l="EMAIL",r=()=>({type:s}),d=e=>({type:i,val:e}),o=()=>({type:l}),u=(e,a)=>{let t=!0;for(const r of a)r.type===s&&(t=t&&e.trim().length>0),r.type===i&&(t=t&&e.trim().length>=r.val),r.type===n&&(t=t&&e.trim().length<=r.val),"MIN"===r.type&&(t=t&&+e>=r.val),"MAX"===r.type&&(t=t&&+e<=r.val),r.type===l&&(t=t&&/^\S+@\S+\.\S+$/.test(e));return t}},220:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(43),i=t(837),n=t(244),l=t(347),r=t(962),d=t(789),o=t(886),u=t(626),p=t(863),c=t(171),v=t(356),m=t(579);const h=()=>{const e=(0,s.useContext)(o.c),[a,t]=(0,s.useState)(!0),{isLoading:h,error:x,sendRequest:g,clearError:f}=(0,c.x)(),[y,j,I]=(0,d.m)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1);return(0,m.jsxs)(s.Fragment,{children:[(0,m.jsx)(u.A,{error:x,onClear:f}),(0,m.jsxs)(i.A,{className:"authentication",children:[h&&(0,m.jsx)(p.A,{asOverlay:!0}),(0,m.jsx)("h2",{children:"Login Required"}),(0,m.jsx)("hr",{}),(0,m.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),console.log(y.inputs),a)try{const a=await g("https://hodophiles-backend.onrender.com/api/users/login","POST",JSON.stringify({email:y.inputs.email.value,password:y.inputs.password.value}),{"Content-Type":"application/json"});e.login(a.userId,a.token)}catch(s){}else try{const a=new FormData;a.append("name",y.inputs.name.value),a.append("email",y.inputs.email.value),a.append("password",y.inputs.password.value),a.append("image",y.inputs.image.value);const t=await g("https://hodophiles-backend.onrender.com/api/users/signup","POST",a);e.login(t.userId,t.token)}catch(s){}},children:[!a&&(0,m.jsx)(n.A,{element:"input",id:"name",type:"text",label:"Your Name",validators:[(0,r.B_)()],errorText:"Please enter a name.",onInput:j}),(0,m.jsx)(n.A,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[(0,r.i$)()],errorText:"Please enter a valid email address.",onInput:j}),(0,m.jsx)(n.A,{element:"input",id:"password",type:"password",label:"Password",validators:[(0,r.Ik)(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:j}),!a&&(0,m.jsx)(v.A,{center:!0,id:"image",onInput:j,errorText:"Please provide an Image."}),(0,m.jsx)(l.A,{type:"submit",disabled:!y.isValid,children:a?"LOGIN":"SIGNUP"})]}),(0,m.jsxs)(l.A,{inverse:!0,onClick:()=>{a?I({...y.inputs,name:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1):I({...y.inputs,name:void 0,image:void 0},y.inputs.email.isValid&&y.inputs.password.isValid),t((e=>!e))},children:["SWITCH TO ",a?"SIGNUP":"LOGIN"]})]})]})}}}]);
//# sourceMappingURL=220.ffe25fa1.chunk.js.map