"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[830],{830:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var a=i(43),l=i(688),s=i(244),n=i(347),r=i(962),c=(i(284),i(789)),d=i(171),o=i(626),u=i(863),p=i(837),v=i(886),h=i(579);const V=()=>{const e=(0,a.useContext)(v.c),{isLoading:t,error:i,sendRequest:V,clearError:f}=(0,d.x)(),y=(0,l.W6)(),m=(0,l.g)().placeId,[x,A,T]=(0,c.m)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),[j,C]=(0,a.useState)(),[I,E]=(0,a.useState)();if((0,a.useEffect)((()=>{(async()=>{try{const e=await V("".concat("https://hodophiles-backend.onrender.com/api","/places/").concat(m));C(e.place),E(e.place.creator),T({title:{value:e.place.title,isValid:!0},description:{value:e.place.description,isValid:!0}},!0)}catch(e){}})()}),[m,V,T]),t)return(0,h.jsx)("div",{className:"center",children:(0,h.jsx)(u.A,{})});if(!j&&!i)return(0,h.jsx)("div",{className:"center",children:(0,h.jsx)(p.A,{children:(0,h.jsx)("h2",{children:"Could not find place!"})})});return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(o.A,{error:i,onClear:f}),(0,h.jsxs)("form",{className:"place-form",onSubmit:async t=>{t.preventDefault();try{await V("".concat("https://hodophiles-backend.onrender.com/api","/places/").concat(m),"PATCH",JSON.stringify({title:x.inputs.title.value,description:x.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});y.push("/".concat(I,"/places"))}catch(i){}},children:[t&&(0,h.jsx)(u.A,{asOverlay:!0}),(0,h.jsx)(s.A,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,r.B_)()],errorText:"Please enter a valid title.",onInput:A,initialValue:x.inputs.title.value,initialValid:x.inputs.title.isValid}),(0,h.jsx)(s.A,{id:"description",element:"textarea",label:"Description",validators:[(0,r.Ik)(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:A,initialValue:x.inputs.description.value,initialValid:x.inputs.description.isValid}),(0,h.jsx)(n.A,{type:"submit",disabled:!x.isValid,children:"UPDATE PLACE"})]})]})}},244:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(43),l=i(962),s=i(579);const n=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:(0,l.tf)(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},r=e=>{const[t,i]=(0,a.useReducer)(n,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:l,onInput:r}=e,{value:c,isValid:d}=t;(0,a.useEffect)((()=>{r(l,c,d)}),[l,c,d,r]);const o=t=>{i({type:"CHANGE",val:t.target.value,validators:e.validators})},u=()=>{i({type:"TOUCH"})},p="input"===e.element?(0,s.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:o,onBlur:u,value:t.value}):(0,s.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:o,onBlur:u,value:t.value});return(0,s.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,s.jsx)("label",{htmlFor:e.id,children:e.label}),p,!t.isValid&&t.isTouched&&(0,s.jsx)("p",{children:e.errorText})]})}},789:(e,t,i)=>{i.d(t,{m:()=>s});var a=i(43);const l=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const a in e.inputs)e.inputs[a]&&(i=a===t.inputId?i&&t.isValid:i&&e.inputs[a].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},s=(e,t)=>{const[i,s]=(0,a.useReducer)(l,{inputs:e,isValid:t});return[i,(0,a.useCallback)(((e,t,i)=>{s({type:"INPUT_CHANGE",inputId:e,value:t,isValid:i})}),[]),(0,a.useCallback)(((e,t)=>{s({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},962:(e,t,i)=>{i.d(t,{B_:()=>r,Ik:()=>c,i$:()=>d,tf:()=>o});const a="REQUIRE",l="MINLENGTH",s="MAXLENGTH",n="EMAIL",r=()=>({type:a}),c=e=>({type:l,val:e}),d=()=>({type:n}),o=(e,t)=>{let i=!0;for(const r of t)r.type===a&&(i=i&&e.trim().length>0),r.type===l&&(i=i&&e.trim().length>=r.val),r.type===s&&(i=i&&e.trim().length<=r.val),"MIN"===r.type&&(i=i&&+e>=r.val),"MAX"===r.type&&(i=i&&+e<=r.val),r.type===n&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i}},284:()=>{}}]);
//# sourceMappingURL=830.3db31e93.chunk.js.map