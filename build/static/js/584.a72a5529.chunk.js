"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[584],{584:(e,s,c)=>{c.r(s),c.d(s,{default:()=>u});var a=c(43),n=c(688),r=c(837),t=c(347),o=c(630),l=c(579);const i=e=>{const s=(0,a.useRef)(),{center:c,zoom:n}=e;return(0,a.useEffect)((()=>{new window.ol.Map({target:s.current.id,layers:[new window.ol.layer.Tile({source:new window.ol.source.OSM})],view:new window.ol.View({center:window.ol.proj.fromLonLat([c.lng,c.lat]),zoom:n})})}),[c,n]),(0,l.jsx)("div",{ref:s,className:"map ".concat(e.className),style:e.style,id:"map"})};var d=c(886),h=c(171),p=c(626),m=c(863);const x=e=>{const s=(0,a.useContext)(d.c),{isLoading:c,error:n,sendRequest:x,clearError:j}=(0,h.x)(),[u,w]=(0,a.useState)(!1),[f,A]=(0,a.useState)(!1),C=()=>{A(!1)};return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(p.A,{error:n,onClear:j}),(0,l.jsx)(o.A,{show:u,onCancel:e.closeMapHandler,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,l.jsx)(t.A,{onClick:()=>w(!1),children:"CLOSE"}),children:(0,l.jsx)("div",{className:"map-container",children:(0,l.jsx)(i,{center:e.coordinates,zoom:16})})}),(0,l.jsx)(o.A,{show:f,onCancel:C,header:"Are you Sure?",footerClass:"place-item__modal-actions",footer:(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(t.A,{inverse:!0,onClick:C,children:"CANCEL"}),(0,l.jsx)(t.A,{danger:!0,onClick:async()=>{A(!1);const c=e.id;try{await x("".concat("https://hodophiles-backend.onrender.com/api","/places/").concat(c),"DELETE",null,{Authorization:"Bearer "+s.token}),e.onDelete(e.id)}catch(a){}},children:"DELETE"})]}),children:(0,l.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone!"})}),(0,l.jsx)("li",{className:"place-item",children:(0,l.jsxs)(r.A,{className:"place-item__content",children:[c&&(0,l.jsx)(m.A,{asOverlay:!0}),(0,l.jsx)("div",{className:"place-item__image",children:(0,l.jsx)("img",{src:"".concat("https://hodophiles-backend.onrender.com","/").concat(e.image),alt:e.title})}),(0,l.jsxs)("div",{className:"place-item__info",children:[(0,l.jsx)("h2",{children:e.title}),(0,l.jsx)("h3",{children:e.address}),(0,l.jsx)("p",{children:e.description})]}),(0,l.jsxs)("div",{className:"place-item__actions",children:[(0,l.jsx)(t.A,{inverse:!0,onClick:()=>w(!0),children:"VIEW ON MAP"}),s.userId===e.creatorId&&(0,l.jsx)(t.A,{to:"/places/".concat(e.id),children:"EDIT"}),s.userId===e.creatorId&&(0,l.jsx)(t.A,{danger:!0,onClick:()=>{A(!0)},children:"DELETE"})]})]})})]})},j=e=>{const s=(0,a.useContext)(d.c).userId;return 0===e.places.length?s!==e.userId?(0,l.jsx)("div",{className:"center",children:(0,l.jsx)("h2",{children:"No places for this user."})}):(0,l.jsx)("div",{className:"place-list center",children:(0,l.jsxs)(r.A,{className:"empty-places-card",children:[(0,l.jsx)("h2",{children:"No places found! Maybe create one?"}),(0,l.jsx)(t.A,{to:"/places/new",children:"Share Place"})]})}):(0,l.jsx)("ul",{className:"place-list",children:e.places.map((s=>(0,l.jsx)(x,{id:s.id,image:s.image,title:s.title,description:s.description,address:s.address,creatorId:s.creator,coordinates:s.location,onDelete:e.onDeletePlace},s.id)))})},u=()=>{const e=(0,n.g)().userId,{isLoading:s,error:c,sendRequest:r,clearError:t}=(0,h.x)(),[o,i]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{try{const s=await r("".concat("https://hodophiles-backend.onrender.com/api","/places/user/").concat(e));i(s.places)}catch(s){console.log(s.message),i([])}})()}),[r,e]);return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(p.A,{error:c,onClear:t}),s&&(0,l.jsx)("div",{className:"center",children:(0,l.jsx)(m.A,{asOverlay:!0})}),!s&&o&&(0,l.jsx)(j,{userId:e,places:o,onDeletePlace:e=>{i((s=>s.filter((s=>s.id!==e))))}})]})}}}]);
//# sourceMappingURL=584.a72a5529.chunk.js.map